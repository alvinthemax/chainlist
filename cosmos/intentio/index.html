<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Connect to Keplr - Intentio Testnet</title>
</head>
<body>
  <h2>üîó Connect to Keplr - Intentio Testnet</h2>
  <button onclick="connectKeplr()">üîê Connect Wallet</button>
  <button onclick="addIntentioChain()">‚ûï Add Intentio Chain</button>
  <p id="wallet-address">Wallet Address: -</p>

  <script>
    const chainId = "intentio-ics-test-1";

    const chainInfo = {
      chainId: chainId,
      chainName: "Intentio Testnet",
      rpc: "https://rpc.intentio-testnet.cosmos.directory",
      rest: "https://rest.intentio-testnet.cosmos.directory",
      stakeCurrency: {
        coinDenom: "INTO",
        coinMinimalDenom: "uinto",
        coinDecimals: 6,
      },
      bip44: {
        coinType: 118,
      },
      bech32Config: {
        bech32PrefixAccAddr: "cosmos",
        bech32PrefixAccPub: "cosmospub",
        bech32PrefixValAddr: "cosmosvaloper",
        bech32PrefixValPub: "cosmosvaloperpub",
        bech32PrefixConsAddr: "cosmosvalcons",
        bech32PrefixConsPub: "cosmosvalconspub",
      },
      currencies: [
        {
          coinDenom: "INTO",
          coinMinimalDenom: "uinto",
          coinDecimals: 6,
        },
      ],
      feeCurrencies: [
        {
          coinDenom: "INTO",
          coinMinimalDenom: "uinto",
          coinDecimals: 6,
        },
      ],
      features: ["stargate", "ibc-transfer"],
    };

    async function addIntentioChain() {
      if (!window.keplr) {
        alert("Keplr belum terpasang.");
        return;
      }

      try {
        await window.keplr.experimentalSuggestChain(chainInfo);
        alert("‚úÖ Chain Intentio berhasil ditambahkan ke Keplr!");
      } catch (err) {
        console.error(err);
        alert("‚ùå Gagal menambahkan chain.");
      }
    }

    async function connectKeplr() {
      if (!window.keplr) {
        alert("Keplr extension belum terpasang.");
        return;
      }

      try {
        await window.keplr.enable(chainId);
        const offlineSigner = window.getOfflineSigner(chainId);
        const accounts = await offlineSigner.getAccounts();
        document.getElementById("wallet-address").innerText =
          "Wallet Address: " + accounts[0].address;
      } catch (err) {
        console.error(err);
        alert("Gagal koneksi ke Keplr.");
      }
    }
  </script>
</body>
</html>
